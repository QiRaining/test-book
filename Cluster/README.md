# 9 集群管理

一个集群是类似主机（Host）组成的逻辑组. 在同一个集群中的主机必须安装相同的操作系统（虚拟机管理程序,hypervisor）, 拥有相同的二层网络连接, 可以访问相同的主存储. 在实际的数据中心, 一个集群通常对应一个机架（rack）。

Mevoco原本默认仅支持一个集群，在初始化的过程中，由初始化程序自动创建。用户之后新增的所有物理机均会添加到这个集群之中。随着需求的扩大，单一一个集群已经不能满足用户的配置要求。集群与主存储、网络之间存在着挂载卸载的关系，其结构如图9-1-1所示。

![png](../images/9-1-1.png "图9-1-1 集群结构图")

###### 图9-1-1 集群结构图

- 一个集群可以挂载一个或者多个主存储, 一个主存储也可以加载多个集群。只要这些主存储可以被这个集群中的所有主机访问. 同时, 主存储也 可以从集群卸载。主存储与集群的依赖关系如图9-1-2所示.

![png](../images/9-1-2.png "图9-1-2 集群与主存储关系图")

###### 图9-1-2 集群结构图

- 只要集群中的主机都在所挂载的L2网络所代表的物理二层广播域中,一个集群可以挂载一个或多个L2网络。一个网卡只能创建一个L2网络，同一类型的多块网卡可以用统一的网卡名创建多个L2网络，但只能挂载到不同的集群。

- 集群本身与镜像服务器没有直接关系，一个Zone可以加载多个镜像服务器，所以一个镜像服务器可以为多个集群提供服务。需要注意的是主存储和镜像服务器（备份存储）具有相关性。

> 例如Ceph主存储只能与Ceph镜像服务器一同工作，如果用户只添加了本地镜像仓库与Ceph主存储，云主机也是不能创建成功的。主存储（PS）和镜像服务器（BS）的相关性关系如图9-1-3所示

![png](../images/9-1-3.png "图9-1-3 主存储与备份存储关系图")

###### 图9-1-3 主存储与备份存储关系图

点击菜单栏的集群按钮，进入集群管理界面，如图9-1所示。在集群管理界面，可以查看集群列表的信息，并对集群进行新建、启用、停用、删除等操作。

![png](../images/9-1.png "图9-1  集群管理界面")###### 图9-1  集群管理界面

对集群操作的相关定义如下：
新建：为mevoco添加一个集群。在集群主界面点击新建按钮，会弹出新的新建集群界面，如图9-2所示，输入集群的名称、简介。

启用：将处于停用状态的集群启用。

停用：停止使用某个集群，同时会停用这个集群中的所有物理机。但用户可以手动启用集群中的某个物理机，也可以添加物理机到这个集群。

删除：删除集群，同时也会删除集群中的所有物理机。

![png](../images/9-2.png "图9-2  新建集群界面")###### 图9-2  新建集群界面

